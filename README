OpenNHRP Release Notes
======================

OpenNHRP is an NHRP implementation for Linux. It has most of the RFC2332
and Cisco IOS extensions.

Project homepage: http://sourceforge.net/projects/opennhrp

	KERNEL REQUIREMENTS

You need a kernel with ip_gre patched to support sending and receiving
using NBMA address. 

The support was originally added to 2.6.24-rc2, but it contains a bug
that prevents NAT detection. The latest fix is present in 2.6.24-rc7.

Gentoo kernels: gentoo-sources-2.6.23-r1 and gentoo-sources-2.6.22-r10
have the partitial support too (no NAT there either).

For the brave who compile their own kernels, there are patches against
vanilla 2.6.20 and 2.6.22 kernels in the patches directory. Or just
upgrade to 2.6.24 or later and no patching is required.

Also remember to turn on CONFIG_ARPD and CONFIG_NET_IPGRE in your kernel
configuration.

	COMPILING

Just type 'make' and 'make install'.

	CONFIGURATION

OpenNHRP currently supports only IPv4 over IPv4 using NBMA GRE tunnels.
To create NBMA GRE tunnel you might use following:

	ip tunnel add gre1 mode gre key 1234 ttl 64
	ip addr add 10.255.255.2/24 dev gre1
	ip link set gre1 up
	
This should work with the configuration example in opennhrp.conf(5).

	IPSEC ENCRYPTION OF GRE PACKETS

To be documented in more detail when ipsec-tools is properly patched.

Currently you can get the latest CVS version of ipsec-tools and apply
the patch from patches/ directory. Compile it with adminport support
enabled. Then you will be able to use the opennhrp-script example in
etc/.

With the above-mentioned patches you could use following SPDs to require
encryption of all GRE traffic:

spdadd 0.0.0.0/0 0.0.0.0/0 gre -P out ipsec esp/transport//require ;
spdadd 0.0.0.0/0 0.0.0.0/0 gre -P in  ipsec esp/transport//require ;


	DOCUMENTATION

Most of the OpenNHRP documentation is in the manpages. Read them.

Also some general NHRP documents can be found from Cisco website
(www.cisco.com).

	BUGS

Use the SourceForge bug tracker or mailing list.
